---
import "../styles/global.css"
import {Clock, Check } from '@lucide/astro';
import { getCollection } from 'astro:content';

const services = await getCollection('services');
const sortedServices = services.sort((a, b) => a.data.order - b.data.order);
---

<section id="servicios" class="py-16 bg-white pb-0">
  <div class="max-w-6xl mx-auto px-6 lg:px-8">
    
    <!-- Header -->
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        Mis Servicios
      </h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">
        Elige la opción que mejor se adapte a tu momento actual 
        y comienza tu proceso de transformación personal.
      </p>
    </div>

    <!-- Grid de servicios -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
      {sortedServices.map((service) => {
        const { data } = service;
        
        return (
          <div class={`h-full flex flex-col rounded-2xl p-8 border-2 transition-all duration-300 hover:shadow-lg hover:-translate-y-1 ${
            data.featured 
              ? 'bg-soft border-primary/30 shadow-md' 
              : 'bg-white border-gray-200 hover:border-primary/20'
          }`}>
            
            {/* Badge featured */}
            {data.featured && (
              <div class="inline-flex items-center space-x-2 bg-primary/10 text-primary px-3 py-1 rounded-full text-sm font-semibold mb-4 self-start">
                <span class="w-2 h-2 bg-primary rounded-full"></span>
                <span>Más Popular</span>
              </div>
            )}

            {/* Contenido */}
            <div class="flex-1 flex flex-col">
              <h3 class="text-xl font-bold text-gray-900 mb-2">{data.title}</h3>
              <p class="text-gray-600 mb-4">{data.subtitle}</p>
              
              {/* Duración */}
              <div class="flex items-center text-sm text-gray-500 mb-4">
                <Clock class="w-3 h-3 mr-2" />
                {data.duration}
              </div>

              {/* Highlight */}
              <p class="text-sm text-primary font-medium mb-6 italic">
                {data.highlight}
              </p>

              {/* Benefits */}
              <div class="flex-1 mb-6">
                <h4 class="font-semibold text-gray-900 mb-3">Incluye:</h4>
                <ul class="space-y-2">
                  {data.benefits.map((benefit: string) => (
                    <li class="flex items-start text-sm text-gray-600">
                      <Check class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" />
                      {benefit}
                    </li>
                  ))}
                </ul>
              </div>

              {/* CTA Button */}
              <a href="#contacto" class={`block w-full text-center px-6 py-3 rounded-xl font-semibold transition-all duration-300 hover:shadow-md hover:-translate-y-0.5 ${
                data.featured 
                  ? 'bg-secondary text-white hover:bg-pink-600' 
                  : 'bg-primary text-white hover:bg-purple-700'
              }`}>
                {data.featured ? 'Quiero Transformar mi Vida' : 'Solicitar Información'}
              </a>
            </div>
          </div>
        );
      })}
    </div>
  </div>
</section>